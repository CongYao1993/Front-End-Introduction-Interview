## 1. Cookie / sessionStorage / localstorage

| <div style="width:100px;"></div> | Cookie                                                                         | localStorage                             | sessionStorage                                                                                                             |
| -------------------------------- | ------------------------------------------------------------------------------ | ---------------------------------------- | -------------------------------------------------------------------------------------------------------------------------- |
| 使用场景                         | 用于客户端与服务器之间传递少量信息                                             | 持久化缓存数据，比如页面的默认偏好配置等 | 一次性临时数据保存，同一会话的多个页面传递数据                                                                             |
| 生命周期                         | 默认关闭标签或浏览器后删除；可以设置 Expires 或 Max-Age 指定的一段时间后被删除 | 长期保留，除非被清除                     | 仅在当前会话下有效，关闭标签或浏览器后被清除                                                                               |
| 作用域                           | 同源或者包含子域名                                                             | 同源，子域无法继承父域的 localStorage    | 不能在多个窗口或标签页之间共享数据，但是同一个会话的新页面（通过 window.open 或链接打开新页面）会复制前一页 sessionStorage |
| 存放数据大小                     | 4KB                                                                            | 5MB                                      | 5MB                                                                                                                        |
| 存放位置                         | 浏览器/服务端                                                                  | 浏览器                                   | 浏览器                                                                                                                     |

### 1.1 Cookie

Cookie 是服务器发送到浏览器并保存在本地的一小块数据，它会在浏览器下次向同一服务器再发起请求时，携带在 HTTP 头部并发送到服务器上。

```
响应头部：Set-Cookie: <cookie名>=<cookie值>
请求头部：Cookie: id=a3fWa; Expires=Wed, 21 Oct 2015 07:28:00 GMT; Secure; HttpOnly; SameSite=Strict
```

- `Domain`：指定了哪些主机可以接受 Cookie。如果不指定，该属性默认为同一主机设置 Cookie，不包含子域名。如果指定了 Domain，则一般包含子域名。
- `Path`：设置 Cookie 的生效路径，子路径也会被匹配。Path=/;表示该域名下所有路径都会被匹配。
- `Secure`：cookie 只通过 https 协议传输，可以预防中间人攻击。
- `HttpOnly`：阻止通过 JavaScript document.cookie 访问 cookie，从而一定程度上遏制 XSS 攻击等。
- `SameSite`：允许服务器要求某个 cookie 在跨站请求时不会被发送，从而可以阻止 CSRF 攻击。

原生的 Cookie 接口不友好，可以用 js-cookie 插件。

### 1.2 Web Storage

Web Storage 定义了两个对象: localStorage 和 sessionStorage。前者是永久存储机制,而后者是跨会话的存储机制。

- localStorage 在 iOS Safari、chrome 和 UC 浏览器中的隐私模式（也叫无痕模式）下无法使用
- 页面间传参，通过 url 或者 pushState 的 state 更好

**如何设置 localstorage 过期时间？**

localstorage 原生是不支持设置过期时间，只能自己来封装一层逻辑来实现：

```javascript
function set(key, value) {
  var curtime = new Date().getTime(); // 获取当前时间
  localStorage.setItem(key, JSON.stringify({ val: value, time: curtime })); // 转换成json字符串序列
}
function get(key, exp) {
  // exp是设置的过期时间
  var val = localStorage.getItem(key); // 获取存储的元素
  var dataobj = JSON.parse(val); // 解析出json对象
  if (new Date().getTime() - dataobj.time > exp) {
    // 如果当前时间-减去存储的元素在创建时候设置的时间 > 过期时间
    console.log("expires"); //提示过期
  } else {
    console.log("val=" + dataobj.val);
  }
}
```

## 2. 进程和线程

一个进程是一个程序的运行实例。启动一个程序时，操作系统会为该程序创建一块内存，用来存放代码、运行中的数据和一个执行任务的主线程，我们把这样的一个运行环境叫进程.

- 进程是 CPU 资源分配的最小单位，每一个进程都有一个自己的内存空间。
- 当一个进程关闭之后，操作系统会回收该进程所申请的所有资源；即使其中任意线程因为操作不当导致内存泄漏，当进程退出时，这些内存也会被正确回收；
- 进程之间的内容相互隔离。一个进程不会影响到其他进程的。

线程是依附于进程执行的，为了提高进程的执行效率。

- 线程是 CPU 调度的最小单位；
- 线程之间共享进程中的数据等所有资源；
- 进程中的任意线程执行出错，都会导致整个进程的崩溃。

## 3. 2、TCP 和 UDP 的区别

TCP 和 UDP 均为传输层协议，传输层提供主机到主机的通信能力。

- 是否需要建立连接
  - TCP 是面向连接的，在传送数据之前必须先建立连接，数据传送结束后要释放连接。
  - UDP 是无连接的，即发送数据前不需要建立连接。
- 可靠性
  - TCP 提供可靠的服务，通过 TCP 连接传送的数据，无差错，不丢失，不重复，且按序到达。
  - UDP 尽最大努力交付，不保证可靠交付。
- 是否支持多对多通信
  - TCP 连接只能是点到点、一对一的，不提供广播或多播服务。
  - UDP 支持一对一，一对多，多对一和多对多的交互通信。
- 拥塞控制
  - TCP 有拥塞控制和流量控制机制，保证数据传输的安全性。
  - UDP 没有拥塞控制，因此网络出现的拥塞不会使源主机的发送速率降低。这对某些实时应用是很重要的。
- 是否分片
  - TCP 的数据大小如果大于最大报文长度，则会进行分片，目标主机收到后，组装 TCP 数据包。
  - UDP 是面向报文的。UDP 对应用层交下来的报文，既不合并，也不拆分，而是保留这些报文的边界，在添加首部后就向下交付 IP 层。UDP 一次交付一个完整的报文。因此，应用程序必须选择合话大小的报文。

应用：

- TCP 应用于对可靠性要求较高的场景，如：FTP 文件传输，HTTP/HTTPS 接口调用等
- UDP 应用于对实时性要求高的场景，如：在线音视频，广播通信，包总量较少的通信，如 DNS、SNMP 等
