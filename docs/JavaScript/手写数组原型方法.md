## 1. Array.prototype.forEach()

forEach() 方法对数组的每个元素执行一次给定的函数。

```javascript
Array.prototype.myForEach = function (callback) {
  if (typeof callback !== "function") {
    throw new Error("must be a function!");
  }

  const len = this.length;
  for (let i = 0; i < len; i++) {
    callback.call(this, this[i], i);
  }
};
```

```javascript
// 测试
const arr = ["a", "b", "c"];
arr.myForEach((item, index) => {
  console.log(index + ": " + item);
});
// 0: a
// 1: b
// 2: c
```

## 2. Array.prototype.map()

map() 方法返回一个新数组，新数组由原数组中的每个元素都调用一次指定函数后的返回值组成。

```javascript
Array.prototype.myMap = function (callback) {
  if (typeof callback !== "function") {
    throw new Error("must be a function!");
  }

  const len = this.length,
    arr = [];
  for (let i = 0; i < len; i++) {
    arr.push(callback.call(this, this[i], i));
  }
  return arr;
};
```

```javascript
// 测试
const arr1 = [1, 2, 3];
const arr2 = arr1.myMap((item) => item * item);
console.log(arr2);
// [1, 4, 9]
```

## 3. Array.prototype.filter()

filter() 方法会返回一个新数组，该新数组由调用回调函数返回 true 的项组成。

```javascript
Array.prototype.myFilter = function (callback) {
  if (typeof callback !== "function") {
    throw new Error("must be a function!");
  }

  const len = this.length,
    arr = [];
  for (let i = 0; i < len; i++) {
    if (callback.call(this, this[i], i)) {
      // 如果该项是对象，进行拷贝后加入新数组
      if (typeof this[i] === "object") {
        arr.push(Object.create(this[i])); // 待确认
      } else {
        arr.push(this[i]);
      }
    }
  }
  return arr;
};
```

```javascript
// 示例：获取数组中的偶数
const arr1 = [4, 7, 2, 0, 1, 5, 9];
const arr2 = arr1.myFilter((item) => item % 2 === 0);
console.log(arr2);
// [4, 2, 0]
```

## 4. Array.prototype.reduce()

reduce() 方法对数组中的每个元素按序执行一个由您提供的 reducer 函数，每一次运行 reducer 会将先前元素的计算结果作为参数传入，最后将其结果汇总为单个返回值。

第一次执行回调函数时，不存在“上一次的计算结果”。如果需要回调函数从数组索引为 0 的元素开始执行，则需要传递初始值。否则，数组索引为 0 的元素将被作为初始值，迭代器将从第二个元素（索引为 1）开始执行。

```javascript
Array.prototype.myReduce = function (callback, initVal) {
  if (typeof callback !== "function") {
    throw new Error("must be a function!");
  }

  const len = this.length;

  let pre = initVal,
    i = 0;

  //没有传入初始值，数组第一位默认为初始值，当前元素索引值变为1
  if (pre == undefined) {
    if (len < 1) {
      throw new Error("Reduce of empty array with no initial value!");
    }
    pre = this[0];
    i = 1;
  }

  for (; i < len; i++) {
    pre = callback.call(this, pre, this[i], i, this);
  }

  return pre;
};
```

累加或累乘

```javascript
const arr = [5, 2, 3];
let plus = arr.myReduce((pre, cur) => pre * cur);
console.log(plus);
// 30
```

有条件累计

```javascript
const arr = [
  {
    type: "all",
    num: 1,
  },
  {
    type: "no",
    num: 2,
  },
  {
    type: "all",
    num: 3,
  },
];
let sum = arr.myReduce((pre, cur) => {
  if (cur.type === "all") {
    pre += cur.num;
  }
  return pre;
}, 0);
console.log(sum);
// 4
```

数组转对象

```javascript
const arr = [
  {
    path: "/login",
    components: "/login.vue",
  },
  {
    path: "/home",
    components: "/home.vue",
  },
];
const obj = arr.myReduce((pre, cur) => {
  pre[cur.path] = cur.components;
  return pre;
}, {});
console.log(obj);
// {/login: '/login.vue', /home: '/home.vue'}
```
